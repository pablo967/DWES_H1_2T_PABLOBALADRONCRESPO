<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro de Entrega</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <script>
    function validateForm() {
      const fechaHoraRegistro = document.getElementById('fechaHoraRegistro').value;
      const fechaHoraSalida = document.getElementById('fechaHoraSalida').value;
      const fechaEntregaPrevista = document.getElementById('fechaEntregaPrevista').value;
      const fechaHoraEntrega = document.getElementById('fechaHoraEntrega').value;

      if (!fechaHoraRegistro && !fechaHoraSalida && !fechaEntregaPrevista && !fechaHoraEntrega) {
        alert('Por favor, completa al menos uno de los campos de fecha.');
        return false;
      }
      return true;
    }
  </script>
</head>
<body>
<div class="container py-5">
  <div class="card shadow-lg">
    <div class="card-body">
      <h1 class="card-title text-center">Registrar Entrega</h1>
      <p class="text-center">Por favor, completa los campos a continuación para registrar una nueva entrega.</p>
      <form action="/nuevoRegistro" method="post" onsubmit="return validateForm()">

        <div class="mb-3">
          <label for="delivery-address" class="form-label">Dirección de Entrega</label>
          <input type="text" id="delivery-address" name="domicilio" class="form-control" required placeholder="Introduce la dirección completa de entrega">
        </div>

        <div class="mb-3">
          <label for="dniCliente" class="form-label">DNI del Cliente</label>
          <input type="text" id="dniCliente" name="dniCliente" class="form-control" required placeholder="Introduce el DNI del cliente">
        </div>

        <div class="mb-3">
          <label for="nombreCliente" class="form-label">Nombre del Cliente</label>
          <input type="text" id="nombreCliente" name="nombreCliente" class="form-control" required placeholder="Introduce el nombre del cliente">
        </div>

        <div class="mb-3">
          <label for="status" class="form-label">Estado de la Entrega</label>
          <select id="status" name="estado" class="form-select" required>
            <option value="recibido">Recibido</option>
            <option value="preparado">Preparado</option>
            <option value="en_camino">En camino</option>
            <option value="entregado">Entregado</option>
          </select>
        </div>

        <div class="mb-3">
          <label for="dniAdministrador" class="form-label">DNI del Administrador</label>
          <input type="text" id="dniAdministrador" name="dniAdministrador" class="form-control-plaintext" th:value="${dniAdministrador}" readonly>
        </div>

        <div class="mb-3">
          <label for="dniConductor" class="form-label">DNI del Conductor</label>
          <select id="dniConductor" name="dniConductor" class="form-select" required>
            <option th:each="conductor : ${conductores}" th:value="${conductor.dni}" th:text="${conductor.dni}"></option>
          </select>
        </div>

        <div class="mb-3">
          <label for="fechaHoraRegistro" class="form-label">Fecha y Hora de Registro</label>
          <input type="datetime-local" id="fechaHoraRegistro" name="fechaHoraRegistro" class="form-control">
        </div>

        <div class="mb-3">
          <label for="fechaHoraSalida" class="form-label">Fecha y Hora de Salida</label>
          <input type="datetime-local" id="fechaHoraSalida" name="fechaHoraSalida" class="form-control">
        </div>

        <div class="mb-3">
          <label for="fechaEntregaPrevista" class="form-label">Fecha de Entrega Prevista</label>
          <input type="date" id="fechaEntregaPrevista" name="fechaEntregaPrevista" class="form-control">
        </div>

        <div class="mb-3">
          <label for="fechaHoraEntrega" class="form-label">Fecha y Hora de Entrega</label>
          <input type="datetime-local" id="fechaHoraEntrega" name="fechaHoraEntrega" class="form-control">
        </div>

        <button type="submit" class="btn btn-primary w-100">Registrar Entrega</button>
      </form>

      <div class="mt-3 text-center">
        <a th:href="@{/admin}" class="btn btn-secondary">Regresar</a>
      </div>
    </div>
  </div>
</div>
</body>
</html>